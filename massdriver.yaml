# This file is autogenerated, do not edit directly. See 'make massdriver.yaml'
---
schema: draft-07
name: aws-aurora-mysql
description: Amazon Aurora is a fully managed relational database engine that's compatible
  with MySQL. Aurora includes a high-performance storage subsystem. Its MySQL-compatible
  database engines are customized to take advantage of that fast distributed storage.
  The underlying storage grows automatically as needed. An Aurora cluster volume can
  grow to a maximum size of 128 tebibytes (TiB). Aurora also automates and standardizes
  database clustering and replication, which are typically among the most challenging
  aspects of database configuration and administration.
source_url: github.com/massdriver-cloud/aws-aurora-mysql
access: private
type: infrastructure
steps:
- path: kms
  provisioner: terraform
  skip_on_delete: true
params:
  examples:
  - __name: Development
    backup:
      skip_final_snapshot: true
      retention_period: 1
    observability:
      enable_cloudwatch_logs_export: false
      enhanced_monitoring_interval: 0
      performance_insights_retention_period: 0
    networking:
      subnet_type: internal
    availability:
      min_replicas: 0
    database:
      instance_class: db.t4g.medium
      deletion_protection: false
  - __name: Production
    backup:
      skip_final_snapshot: false
      retention_period: 35
    observability:
      enable_cloudwatch_logs_export: true
      enhanced_monitoring_interval: 60
      performance_insights_retention_period: 372
    networking:
      subnet_type: internal
    availability:
      min_replicas: 2
    database:
      instance_class: db.r6g.2xlarge
      deletion_protection: true
  required:
  - networking
  - database
  - backup
  - observability
  - availability
  properties:
    availability:
      title: Availability
      type: object
      required:
      - min_replicas
      - autoscaling_mode
      properties:
        min_replicas:
          title: Minimum Replicas
          description: Replicas and primary are automatically spread across AWS zones.
          type: integer
          minimum: 0
          default: 0
          maximum: 15
        autoscaling_mode:
          title: Autoscaling Mode
          type: string
          default: DISABLED
          oneOf:
          - title: Disabled
            const: DISABLED
          - title: Database Connections
            const: RDSReaderAverageDatabaseConnections
          - title: CPU Utilization
            const: RDSReaderAverageCPUUtilization
      dependencies:
        autoscaling_mode:
          oneOf:
          - properties:
              autoscaling_mode:
                const: DISABLED
          - required:
            - max_replicas
            - scale_in_cooldown
            - scale_out_cooldown
            - target_value
            properties:
              autoscaling_mode:
                const: RDSReaderAverageDatabaseConnections
              max_replicas:
                title: Max Replicas
                description: Must be greater than `min_replicas`
                type: integer
                maximum: 15
                minimum: 1
              scale_in_cooldown:
                title: Scale-in Cooldown
                description: The number of **seconds** to block subsequent scale-in
                  requests.
                type: integer
                minimum: 0
                maximum: 3000
                default: 300
              scale_out_cooldown:
                title: Scale-out Cooldown
                description: The number of **seconds** to block subsequent scale-out
                  requests.
                type: integer
                minimum: 0
                maximum: 3000
                default: 300
              target_value:
                title: Target Database Connections
                description: The average number of database connections to target
                  across all readers.
                type: integer
                minimum: 0
                default: 400
          - required:
            - max_replicas
            - scale_in_cooldown
            - scale_out_cooldown
            - target_value
            properties:
              autoscaling_mode:
                const: RDSReaderAverageCPUUtilization
              max_replicas:
                title: Max Replicas
                description: Must be greater than `min_replicas`
                type: integer
                maximum: 15
                minimum: 1
              scale_in_cooldown:
                title: Scale-in Cooldown
                description: The number of **seconds** to block subsequent scale-in
                  requests.
                type: integer
                minimum: 0
                maximum: 3000
                default: 300
              scale_out_cooldown:
                title: Scale-out Cooldown
                description: The number of **seconds** to block subsequent scale-out
                  requests.
                type: integer
                minimum: 0
                maximum: 3000
                default: 300
              target_value:
                title: Target CPU Utilization
                description: The average CPU utilization to target across all readers.
                type: integer
                minimum: 5
                maximum: 100
                default: 80
    observability:
      title: Observability
      type: object
      required:
      - enable_cloudwatch_logs_export
      - enhanced_monitoring_interval
      - performance_insights_retention_period
      properties:
        performance_insights_retention_period:
          title: Performance Insights Retention Period
          description: Performance Insights is a database performance tuning and monitoring
            feature that helps you quickly assess the load on your database, and determine
            when and where to take action. Performance Insights allows non-experts
            to detect performance problems with an easy-to-understand dashboard that
            visualizes database load.
          type: integer
          default: 0
          oneOf:
          - title: Disabled
            const: 0
          - title: 1 Week
            const: 7
          - title: 1 Month
            const: 31
          - title: 3 Months
            const: 93
          - title: 6 Months
            const: 186
          - title: 1 Year
            const: 372
          - title: 2 Years
            const: 731
        enable_cloudwatch_logs_export:
          title: Enable Cloudwatch Logs Export
          default: true
          type: boolean
        enhanced_monitoring_interval:
          title: Enhanced Monitoring Interval
          description: Monitor the operating system of DB instances in real time.
            Enhanced Monitoring is stored in Cloudwatch Logs and may incur additional
            changes. [Learn more](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_Monitoring.OS.html)
          type: integer
          default: 0
          oneOf:
          - title: Disabled
            const: 0
          - title: 1 second
            const: 1
          - title: 5 seconds
            const: 5
          - title: 10 seconds
            const: 10
          - title: 15 seconds
            const: 15
          - title: 30 seconds
            const: 30
          - title: 60 seconds
            const: 60
    backup:
      title: Backups, Snapshots, & Recovery
      type: object
      required:
      - skip_final_snapshot
      - retention_period
      properties:
        skip_final_snapshot:
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/aws/rds/skip_final_snapshot.json
        retention_period:
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/aws/rds/backup_retention_period.json
    database:
      title: Database
      type: object
      required:
      - version
      - deletion_protection
      - instance_class
      - ca_cert_identifier

      properties:
        source_snapshot:
          "$md.immutable": true
          title: Restore from Snapshot (ARN)
          description: Cluster or database snapshot ARN. Specifies whether or not
            to **create** this cluster from a snapshot. Aurora clusters can be restored
            from cluster snapshots *or* database snapshots. [Learn more](https://docs.massdriver.cloud/runbook/aws/migrating-rds-databases)
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/artifact-definitions/main/definitions/types/aws-arn.json
          pattern: "^arn:aws:rds:[a-zA-Z0-9._-]*:[0-9]{12}:(cluster-snapshot|snapshot):[a-zA-Z0-9/._-]+$"
        ca_cert_identifier:
          title: SSL/TLS Encryption
          description: The identifier of the CA certificate for the DB instances.
            [Learn more](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html).
          type: string
          default: rds-ca-rsa2048-g1
          oneOf:
          - title: RSA 2048
            const: rds-ca-rsa2048-g1
          - title: RSA 4096
            const: rds-ca-rsa4096-g1
          - title: ECC 384
            const: rds-ca-ecc384-g1
        version:
          title: MySQL Version
          type: string
          default: 8.0.mysql_aurora.3.07.1
          oneOf:
          - title: Aurora (MySQL 5.7) 2.11.1
            const: 5.7.mysql_aurora.2.11.1
          - title: Aurora (MySQL 5.7) 2.11.2
            const: 5.7.mysql_aurora.2.11.2
          - title: Aurora (MySQL 5.7) 2.11.3
            const: 5.7.mysql_aurora.2.11.3
          - title: Aurora (MySQL 5.7) 2.11.4
            const: 5.7.mysql_aurora.2.11.4
          - title: Aurora MySQL (compatible with MySQL 5.7.2.11.4)
            const: 5.7.mysql_aurora.2.11.4
          - title: Aurora (MySQL 5.7) 2.11.5
            const: 5.7.mysql_aurora.2.11.5
          - title: Aurora (MySQL 5.7) 2.11.6
            const: 5.7.mysql_aurora.2.11.6
          - title: Aurora MySQL 2.12.0 (compatible with MySQL 5.7.40)
            const: 5.7.mysql_aurora.2.12.0
          - title: Aurora MySQL 2.12.1 (compatible with MySQL 5.7.40)
            const: 5.7.mysql_aurora.2.12.1
          - title: Aurora MySQL 2.12.2 (compatible with MySQL 5.7.44)
            const: 5.7.mysql_aurora.2.12.2
          - title: Aurora MySQL 2.12.3 (compatible with MySQL 5.7.44)
            const: 5.7.mysql_aurora.2.12.3
          - title: Aurora MySQL 2.12.4 (compatible with MySQL 5.7.44)
            const: 5.7.mysql_aurora.2.12.4
          - title: Aurora MySQL 3.04.0 (compatible with MySQL 8.0.28)
            const: 8.0.mysql_aurora.3.04.0
          - title: Aurora MySQL 3.04.1 (compatible with MySQL 8.0.28)
            const: 8.0.mysql_aurora.3.04.1
          - title: Aurora MySQL 3.04.2 (compatible with MySQL 8.0.28)
            const: 8.0.mysql_aurora.3.04.2
          - title: Aurora MySQL 3.04.3 (compatible with MySQL 8.0.28)
            const: 8.0.mysql_aurora.3.04.3
          - title: Aurora MySQL 3.05.2 (compatible with MySQL 8.0.32)
            const: 8.0.mysql_aurora.3.05.2
          - title: Aurora MySQL 3.06.0 (compatible with MySQL 8.0.34)
            const: 8.0.mysql_aurora.3.06.0
          - title: Aurora MySQL 3.06.1 (compatible with MySQL 8.0.34)
            const: 8.0.mysql_aurora.3.06.1
          - title: Aurora MySQL 3.07.0 (compatible with MySQL 8.0.36)
            const: 8.0.mysql_aurora.3.07.0
          - title: Aurora MySQL 3.07.1 (compatible with MySQL 8.0.36)
            const: 8.0.mysql_aurora.3.07.1
        deletion_protection:
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/aws/rds/deletion_protection.json
      if:
        properties:
          instance_class:
            const: db.serverless
      then:
        required:
        - serverless_scaling
        properties:
          serverless_scaling:
            "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/aws/rds/aurora/serverlessv2_scaling_configuration.json                
      dependencies:
        version:
          oneOf:
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.2
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.3
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.4
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.4
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.5
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.6
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.0
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.2
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.3
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.4
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.04.0
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.04.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.04.2
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.04.3
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.05.2
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.06.0
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.06.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.07.0
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.07.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
    networking:
      title: Networking
      type: object
      properties:
        subnet_type:
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/massdriver/properties/networking/aws/subnet_type.json
  "$defs":
    instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc:
      title: Instance Class
      type: string
      oneOf:
      - title: Burstable 2 GiB, 1 vCPUs (db.t2.small)
        const: db.t2.small
      - title: Burstable 2 GiB, 2 vCPUs (db.t3.small)
        const: db.t3.small
      - title: Burstable 4 GiB, 2 vCPUs (db.t3.medium)
        const: db.t3.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t2.medium)
        const: db.t2.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t4g.medium)
        const: db.t4g.medium
      - title: Burstable 8 GiB, 2 vCPUs (db.t4g.large)
        const: db.t4g.large
      - title: Burstable 8 GiB, 2 vCPUs (db.t3.large)
        const: db.t3.large
      - title: Memory Optimized 15 GiB, 2 vCPUs (db.r4.large)
        const: db.r4.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6i.large)
        const: db.r6i.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r5.large)
        const: db.r5.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6g.large)
        const: db.r6g.large
      - title: Memory Optimized 32 GiB, 2 vCPUs (db.x2g.large)
        const: db.x2g.large
      - title: Memory Optimized 30 GiB, 4 vCPUs (db.r4.xlarge)
        const: db.r4.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6g.xlarge)
        const: db.r6g.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r5.xlarge)
        const: db.r5.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6i.xlarge)
        const: db.r6i.xlarge
      - title: Memory Optimized 64 GiB, 4 vCPUs (db.x2g.xlarge)
        const: db.x2g.xlarge
      - title: Memory Optimized 61 GiB, 8 vCPUs (db.r4.2xlarge)
        const: db.r4.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6g.2xlarge)
        const: db.r6g.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6i.2xlarge)
        const: db.r6i.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r5.2xlarge)
        const: db.r5.2xlarge
      - title: Memory Optimized 128 GiB, 8 vCPUs (db.x2g.2xlarge)
        const: db.x2g.2xlarge
      - title: Memory Optimized 122 GiB, 16 vCPUs (db.r4.4xlarge)
        const: db.r4.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r5.4xlarge)
        const: db.r5.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6g.4xlarge)
        const: db.r6g.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6i.4xlarge)
        const: db.r6i.4xlarge
      - title: Memory Optimized 256 GiB, 16 vCPUs (db.x2g.4xlarge)
        const: db.x2g.4xlarge
      - title: Memory Optimized 244 GiB, 32 vCPUs (db.r4.8xlarge)
        const: db.r4.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6g.8xlarge)
        const: db.r6g.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6i.8xlarge)
        const: db.r6i.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r5.8xlarge)
        const: db.r5.8xlarge
      - title: Memory Optimized 512 GiB, 32 vCPUs (db.x2g.8xlarge)
        const: db.x2g.8xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6g.12xlarge)
        const: db.r6g.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r5.12xlarge)
        const: db.r5.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6i.12xlarge)
        const: db.r6i.12xlarge
      - title: Memory Optimized 768 GiB, 48 vCPUs (db.x2g.12xlarge)
        const: db.x2g.12xlarge
      - title: Memory Optimized 488 GiB, 64 vCPUs (db.r4.16xlarge)
        const: db.r4.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r5.16xlarge)
        const: db.r5.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6g.16xlarge)
        const: db.r6g.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6i.16xlarge)
        const: db.r6i.16xlarge
      - title: Memory Optimized 1024 GiB, 64 vCPUs (db.x2g.16xlarge)
        const: db.x2g.16xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r5.24xlarge)
        const: db.r5.24xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r6i.24xlarge)
        const: db.r6i.24xlarge
      - title: Memory Optimized 1024 GiB, 128 vCPUs (db.r6i.32xlarge)
        const: db.r6i.32xlarge
    instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86:
      title: Instance Class
      type: string
      oneOf:
      - title: Burstable 2 GiB, 1 vCPUs (db.t2.small)
        const: db.t2.small
      - title: Burstable 2 GiB, 2 vCPUs (db.t3.small)
        const: db.t3.small
      - title: Burstable 4 GiB, 2 vCPUs (db.t4g.medium)
        const: db.t4g.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t3.medium)
        const: db.t3.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t2.medium)
        const: db.t2.medium
      - title: Burstable 8 GiB, 2 vCPUs (db.t3.large)
        const: db.t3.large
      - title: Burstable 8 GiB, 2 vCPUs (db.t4g.large)
        const: db.t4g.large
      - title: Memory Optimized 15 GiB, 2 vCPUs (db.r4.large)
        const: db.r4.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r7g.large)
        const: db.r7g.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6i.large)
        const: db.r6i.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6g.large)
        const: db.r6g.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r5.large)
        const: db.r5.large
      - title: Memory Optimized 32 GiB, 2 vCPUs (db.x2g.large)
        const: db.x2g.large
      - title: Memory Optimized 30 GiB, 4 vCPUs (db.r4.xlarge)
        const: db.r4.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r7g.xlarge)
        const: db.r7g.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r5.xlarge)
        const: db.r5.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6g.xlarge)
        const: db.r6g.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6i.xlarge)
        const: db.r6i.xlarge
      - title: Memory Optimized 64 GiB, 4 vCPUs (db.x2g.xlarge)
        const: db.x2g.xlarge
      - title: Memory Optimized 61 GiB, 8 vCPUs (db.r4.2xlarge)
        const: db.r4.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r7g.2xlarge)
        const: db.r7g.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6g.2xlarge)
        const: db.r6g.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6i.2xlarge)
        const: db.r6i.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r5.2xlarge)
        const: db.r5.2xlarge
      - title: Memory Optimized 128 GiB, 8 vCPUs (db.x2g.2xlarge)
        const: db.x2g.2xlarge
      - title: Memory Optimized 122 GiB, 16 vCPUs (db.r4.4xlarge)
        const: db.r4.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6g.4xlarge)
        const: db.r6g.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r7g.4xlarge)
        const: db.r7g.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r5.4xlarge)
        const: db.r5.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6i.4xlarge)
        const: db.r6i.4xlarge
      - title: Memory Optimized 256 GiB, 16 vCPUs (db.x2g.4xlarge)
        const: db.x2g.4xlarge
      - title: Memory Optimized 244 GiB, 32 vCPUs (db.r4.8xlarge)
        const: db.r4.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6i.8xlarge)
        const: db.r6i.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r5.8xlarge)
        const: db.r5.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6g.8xlarge)
        const: db.r6g.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r7g.8xlarge)
        const: db.r7g.8xlarge
      - title: Memory Optimized 512 GiB, 32 vCPUs (db.x2g.8xlarge)
        const: db.x2g.8xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r5.12xlarge)
        const: db.r5.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6g.12xlarge)
        const: db.r6g.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6i.12xlarge)
        const: db.r6i.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r7g.12xlarge)
        const: db.r7g.12xlarge
      - title: Memory Optimized 768 GiB, 48 vCPUs (db.x2g.12xlarge)
        const: db.x2g.12xlarge
      - title: Memory Optimized 488 GiB, 64 vCPUs (db.r4.16xlarge)
        const: db.r4.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6i.16xlarge)
        const: db.r6i.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r7g.16xlarge)
        const: db.r7g.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6g.16xlarge)
        const: db.r6g.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r5.16xlarge)
        const: db.r5.16xlarge
      - title: Memory Optimized 1024 GiB, 64 vCPUs (db.x2g.16xlarge)
        const: db.x2g.16xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r6i.24xlarge)
        const: db.r6i.24xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r5.24xlarge)
        const: db.r5.24xlarge
      - title: Memory Optimized 1024 GiB, 128 vCPUs (db.r6i.32xlarge)
        const: db.r6i.32xlarge
    instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9:
      title: Instance Class
      type: string
      oneOf:
      - title: Serverless 2GiB / 1 ACU (db.serverless)
        const: db.serverless
      - title: Burstable 4 GiB, 2 vCPUs (db.t4g.medium)
        const: db.t4g.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t3.medium)
        const: db.t3.medium
      - title: Burstable 8 GiB, 2 vCPUs (db.t4g.large)
        const: db.t4g.large
      - title: Burstable 8 GiB, 2 vCPUs (db.t3.large)
        const: db.t3.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6g.large)
        const: db.r6g.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6i.large)
        const: db.r6i.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r5.large)
        const: db.r5.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r7g.large)
        const: db.r7g.large
      - title: Memory Optimized 32 GiB, 2 vCPUs (db.x2g.large)
        const: db.x2g.large
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r5.xlarge)
        const: db.r5.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r7g.xlarge)
        const: db.r7g.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6i.xlarge)
        const: db.r6i.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6g.xlarge)
        const: db.r6g.xlarge
      - title: Memory Optimized 64 GiB, 4 vCPUs (db.x2g.xlarge)
        const: db.x2g.xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6g.2xlarge)
        const: db.r6g.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6i.2xlarge)
        const: db.r6i.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r5.2xlarge)
        const: db.r5.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r7g.2xlarge)
        const: db.r7g.2xlarge
      - title: Memory Optimized 128 GiB, 8 vCPUs (db.x2g.2xlarge)
        const: db.x2g.2xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6i.4xlarge)
        const: db.r6i.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r7g.4xlarge)
        const: db.r7g.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r5.4xlarge)
        const: db.r5.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6g.4xlarge)
        const: db.r6g.4xlarge
      - title: Memory Optimized 256 GiB, 16 vCPUs (db.x2g.4xlarge)
        const: db.x2g.4xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6i.8xlarge)
        const: db.r6i.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r5.8xlarge)
        const: db.r5.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6g.8xlarge)
        const: db.r6g.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r7g.8xlarge)
        const: db.r7g.8xlarge
      - title: Memory Optimized 512 GiB, 32 vCPUs (db.x2g.8xlarge)
        const: db.x2g.8xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6i.12xlarge)
        const: db.r6i.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r5.12xlarge)
        const: db.r5.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6g.12xlarge)
        const: db.r6g.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r7g.12xlarge)
        const: db.r7g.12xlarge
      - title: Memory Optimized 768 GiB, 48 vCPUs (db.x2g.12xlarge)
        const: db.x2g.12xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r5.16xlarge)
        const: db.r5.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6i.16xlarge)
        const: db.r6i.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6g.16xlarge)
        const: db.r6g.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r7g.16xlarge)
        const: db.r7g.16xlarge
      - title: Memory Optimized 1024 GiB, 64 vCPUs (db.x2g.16xlarge)
        const: db.x2g.16xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r6i.24xlarge)
        const: db.r6i.24xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r5.24xlarge)
        const: db.r5.24xlarge
      - title: Memory Optimized 1024 GiB, 128 vCPUs (db.r6i.32xlarge)
        const: db.r6i.32xlarge
connections:
  required:
  - vpc
  - aws_authentication
  properties:
    vpc:
      "$ref": massdriver/aws-vpc
    aws_authentication:
      "$ref": massdriver/aws-iam-role
artifacts:
  required:
  - writer
  - readers
  properties:
    writer:
      "$ref": massdriver/mysql-authentication
    readers:
      "$ref": massdriver/mysql-authentication
ui:
  ui:order:
  - database
  - availability
  - observability
  - backups
  - "*"
  - networking
  database:
    ui:order:
    - version
    - instance_class
    - serverless_scaling
    - source_snapshot
    - ca_cert_identifier
    - deletion_protection     
    serverless_scaling:
      ui:order:
      - min_capacity
      - max_capacity

  availability:
    ui:order:
    - autoscaling_mode
    - min_replicas
    - max_replicas
    - target_value
    - scale_in_cooldown
    - scale_out_cooldown
  backups:
    ui:order:
    - retention_period
    - skip_final_snapshot
    - "*"
  observability:
    ui:order:
    - enable_cloudwatch_logs_export
    - enhanced_monitoring_interval
    - performance_insights_retention_period
    - "*"
