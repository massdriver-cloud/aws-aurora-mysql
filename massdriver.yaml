---
schema: draft-07
name: aws-aurora-mysql
description: Amazon Aurora is a fully managed relational database engine that's compatible
  with MySQL. Aurora includes a high-performance storage subsystem. Its MySQL-compatible
  database engines are customized to take advantage of that fast distributed storage.
  The underlying storage grows automatically as needed. An Aurora cluster volume can
  grow to a maximum size of 128 tebibytes (TiB). Aurora also automates and standardizes
  database clustering and replication, which are typically among the most challenging
  aspects of database configuration and administration.
source_url: github.com/massdriver-cloud/aws-aurora-mysql
access: private
type: infrastructure
steps:
- path: kms
  provisioner: terraform
  skip_on_delete: true
- path: src
  provisioner: terraform
params:
  examples:
  - __name: Development
    backup:
      skip_final_snapshot: true
      retention_period: 1
    observability:
      enabled_cloudwatch_logs_exports: []
      enhanced_monitoring_interval: 0
      performance_insights_retention_period: 0
    networking:
      subnet_type: internal
    availability:
      min_replicas: 0
    database:
      instance_class: db.t4g.medium
      deletion_protection: false
  - __name: Production
    backup:
      skip_final_snapshot: false
      retention_period: 35
    observability:
      enabled_cloudwatch_logs_exports:
      - audit
      - error
      - general
      - slowquery
      enhanced_monitoring_interval: 60
      performance_insights_retention_period: 372
    networking:
      subnet_type: internal
    availability:
      min_replicas: 2
    database:
      instance_class: db.r6g.2xlarge
      deletion_protection: true
  required:
  - networking
  - database
  - backup
  - observability
  - availability
  properties:
    parameter_groups:
      title: Parameter Groups
      type: object
      properties:
        instance_parameters:
          type: array
          title: Instance Parameters
          description: Configures settings that apply to each instance within the
            cluster, such as memory, cache, and connection limits.
          items:
            type: object
            title: Parameter
            required:
            - name
            - value
            - apply_method
            properties:
              name:
                type: string
                title: Name
                enum:
                - activate_all_roles_on_login
                - aurora_disable_hash_join
                - aurora_lab_mode
                - aurora_oom_response
                - aurora_parallel_query
                - aurora_pq
                - aurora_read_replica_read_committed
                - aurora_tmptable_enable_per_table_limit
                - aurora_use_vector_instructions
                - autocommit
                - automatic_sp_privileges
                - back_log
                - binlog_cache_size
                - binlog_max_flush_queue_time
                - binlog_order_commits
                - binlog_stmt_cache_size
                - binlog_transaction_compression
                - binlog_transaction_compression_level_zstd
                - bulk_insert_buffer_size
                - concurrent_insert
                - connect_timeout
                - default_tmp_storage_engine
                - default_week_format
                - delay_key_write
                - delayed_insert_limit
                - delayed_insert_timeout
                - delayed_queue_size
                - div_precision_increment
                - end_markers_in_json
                - eq_range_index_dive_limit
                - event_scheduler
                - explicit_defaults_for_timestamp
                - flush_time
                - ft_max_word_len
                - ft_min_word_len
                - ft_query_expansion_limit
                - ft_stopword_file
                - general_log
                - group_concat_max_len
                - host_cache_size
                - init_connect
                - innodb_adaptive_hash_index
                - innodb_adaptive_max_sleep_delay
                - innodb_aurora_max_partitions_for_range
                - innodb_autoextend_increment
                - innodb_buffer_pool_size
                - innodb_compression_failure_threshold_pct
                - innodb_compression_level
                - innodb_compression_pad_pct_max
                - innodb_concurrency_tickets
                - innodb_deadlock_detect
                - innodb_file_format
                - innodb_ft_aux_table
                - innodb_ft_cache_size
                - innodb_ft_enable_stopword
                - innodb_ft_server_stopword_table
                - innodb_ft_user_stopword_table
                - innodb_large_prefix
                - innodb_lock_wait_timeout
                - innodb_lru_scan_depth
                - innodb_max_purge_lag
                - innodb_max_purge_lag_delay
                - innodb_monitor_disable
                - innodb_monitor_enable
                - innodb_monitor_reset
                - innodb_monitor_reset_all
                - innodb_old_blocks_pct
                - innodb_old_blocks_time
                - innodb_open_files
                - innodb_print_all_deadlocks
                - innodb_random_read_ahead
                - innodb_read_ahead_threshold
                - innodb_replication_delay
                - innodb_sort_buffer_size
                - innodb_stats_auto_recalc
                - innodb_stats_method
                - innodb_stats_on_metadata
                - innodb_stats_persistent
                - innodb_stats_persistent_sample_pages
                - innodb_stats_transient_sample_pages
                - innodb_thread_sleep_delay
                - interactive_timeout
                - internal_tmp_disk_storage_engine
                - internal_tmp_mem_storage_engine
                - join_buffer_size
                - keep_files_on_create
                - key_buffer_size
                - key_cache_age_threshold
                - key_cache_block_size
                - key_cache_division_limit
                - local_infile
                - lock_wait_timeout
                - log_bin_trust_function_creators
                - log_bin_use_v1_row_events
                - log_error_suppression_list
                - log_output
                - log_queries_not_using_indexes
                - log_throttle_queries_not_using_indexes
                - log_warnings
                - long_query_time
                - low_priority_updates
                - max_allowed_packet
                - max_binlog_cache_size
                - max_binlog_stmt_cache_size
                - max_connect_errors
                - max_connections
                - max_delayed_threads
                - max_error_count
                - max_execution_time
                - max_heap_table_size
                - max_insert_delayed_threads
                - max_join_size
                - max_length_for_sort_data
                - max_prepared_stmt_count
                - max_seeks_for_key
                - max_sort_length
                - max_sp_recursion_depth
                - max_tmp_tables
                - max_user_connections
                - max_write_lock_count
                - metadata_locks_cache_size
                - min_examined_row_limit
                - myisam_data_pointer_size
                - myisam_max_sort_file_size
                - myisam_mmap_size
                - myisam_sort_buffer_size
                - myisam_stats_method
                - myisam_use_mmap
                - net_buffer_length
                - net_read_timeout
                - net_retry_count
                - net_write_timeout
                - old_passwords
                - old-style-user-limits
                - optimizer_prune_level
                - optimizer_search_depth
                - optimizer_switch
                - optimizer_trace
                - optimizer_trace_features
                - optimizer_trace_limit
                - optimizer_trace_max_mem_size
                - optimizer_trace_offset
                - performance_schema
                - performance_schema_accounts_size
                - performance_schema_consumer_events_stages_current
                - performance_schema_consumer_events_stages_history
                - performance_schema_consumer_events_stages_history_long
                - performance_schema_consumer_events_statements_current
                - performance_schema_consumer_events_statements_history
                - performance_schema_consumer_events_statements_history_long
                - performance_schema_consumer_events_waits_history
                - performance_schema_consumer_events_waits_history_long
                - performance_schema_consumer_global_instrumentation
                - performance_schema_consumer_statements_digest
                - performance_schema_consumer_thread_instrumentation
                - performance_schema_digests_size
                - performance_schema_events_stages_history_long_size
                - performance_schema_events_stages_history_size
                - performance_schema_events_statements_history_long_size
                - performance_schema_events_statements_history_size
                - performance_schema_events_transactions_history_long_size
                - performance_schema_events_transactions_history_size
                - performance_schema_events_waits_history_long_size
                - performance_schema_events_waits_history_size
                - performance_schema_hosts_size
                - performance_schema_max_cond_classes
                - performance_schema_max_cond_instances
                - performance_schema_max_digest_length
                - performance_schema_max_file_classes
                - performance_schema_max_file_handles
                - performance_schema_max_file_instances
                - performance_schema_max_index_stat
                - performance_schema_max_memory_classes
                - performance_schema_max_metadata_locks
                - performance_schema_max_mutex_classes
                - performance_schema_max_mutex_instances
                - performance_schema_max_prepared_statements_instances
                - performance_schema_max_program_instances
                - performance_schema_max_rwlock_classes
                - performance_schema_max_rwlock_instances
                - performance_schema_max_socket_classes
                - performance_schema_max_socket_instances
                - performance_schema_max_sql_text_length
                - performance_schema_max_stage_classes
                - performance_schema_max_statement_classes
                - performance_schema_max_statement_stack
                - performance_schema_max_table_handles
                - performance_schema_max_table_instances
                - performance_schema_max_table_lock_stat
                - performance_schema_max_thread_classes
                - performance_schema_max_thread_instances
                - performance_schema_session_connect_attrs_size
                - performance_schema_setup_actors_size
                - performance_schema_setup_objects_size
                - performance_schema_show_processlist
                - performance_schema_users_size
                - performance-schema-consumer-events-waits-current
                - performance-schema-instrument
                - preload_buffer_size
                - profiling_history_size
                - query_alloc_block_size
                - query_cache_limit
                - query_cache_min_res_unit
                - query_cache_size
                - query_cache_type
                - query_cache_wlock_invalidate
                - query_prealloc_size
                - range_alloc_block_size
                - read_buffer_size
                - read_only
                - read_rnd_buffer_size
                - relay_log_info_repository
                - replica_checkpoint_group
                - replica_checkpoint_period
                - replica_parallel_workers
                - replica_pending_jobs_size_max
                - replica_skip_errors
                - replica_sql_verify_checksum
                - safe-user-create
                - secure_auth
                - show_create_table_verbosity
                - skip_show_database
                - slave_checkpoint_group
                - slave_checkpoint_period
                - slave_parallel_workers
                - slave_pending_jobs_size_max
                - slave_sql_verify_checksum
                - slow_launch_time
                - slow_query_log
                - sort_buffer_size
                - sql_mode
                - sql_select_limit
                - stored_program_cache
                - sync_master_info
                - sync_relay_log
                - sync_relay_log_info
                - sync_source_info
                - sysdate-is-now
                - table_definition_cache
                - table_open_cache
                - table_open_cache_instances
                - temp-pool
                - temptable_max_mmap
                - temptable_max_ram
                - temptable_use_mmap
                - thread_cache_size
                - thread_stack
                - timed_mutexes
                - tmp_table_size
                - transaction_alloc_block_size
                - transaction_isolation
                - transaction_prealloc_size
                - tx_isolation
                - updatable_views_with_limit
                - wait_timeout
              value:
                type: string
                title: Value
              apply_method:
                type: string
                title: Apply Method
                description: When to apply the parameter changes.
                default: pending-reboot
                enum:
                - pending-reboot
                - immediate
        cluster_parameters:
          type: array
          title: Cluster Parameters
          description: Configures settings that apply to the entire Aurora cluster,
            affecting all instances, such as replication and logging configurations.
          items:
            required:
            - name
            - value
            - apply_method
            type: object
            title: Parameter
            properties:
              name:
                type: string
                title: Name
                enum:
                - aurora_binlog_read_buffer_size
                - aurora_binlog_replication_max_yield_seconds
                - aurora_binlog_replication_sec_index_parallel_workers
                - aurora_binlog_use_large_read_buffer
                - aurora_disable_hash_join
                - aurora_enable_repl_bin_log_filtering
                - aurora_enable_replica_log_compression
                - aurora_enable_staggered_replica_restart
                - aurora_enable_zdr
                - aurora_enhanced_binlog
                - aurora_jemalloc_background_thread
                - aurora_jemalloc_dirty_decay_ms
                - aurora_jemalloc_tcache_enabled
                - aurora_load_from_s3_role
                - aurora_mask_password_hashes_type
                - aurora_select_into_s3_role
                - authentication_kerberos_caseins_cmp
                - auto_increment_increment
                - auto_increment_offset
                - aws_default_lambda_role
                - aws_default_s3_role
                - binlog_backup
                - binlog_checksum
                - binlog_format
                - binlog_group_commit_sync_delay
                - binlog_group_commit_sync_no_delay_count
                - binlog_replication_globaldb
                - binlog_row_metadata
                - binlog_row_value_options
                - binlog_rows_query_log_events
                - binlog_transaction_compression
                - binlog_transaction_compression_level_zstd
                - binlog_transaction_dependency_history_size
                - binlog_transaction_dependency_tracking
                - binlog-do-db
                - binlog-ignore-db
                - character_set_client
                - character_set_connection
                - character_set_database
                - character_set_filesystem
                - character_set_results
                - character_set_server
                - character-set-client-handshake
                - collation_connection
                - collation_server
                - completion_type
                - enforce_gtid_consistency
                - event_scheduler
                - gtid-mode
                - information_schema_stats_expiry
                - init_connect
                - innodb_adaptive_hash_index
                - innodb_aurora_instant_alter_column_allowed
                - innodb_autoinc_lock_mode
                - innodb_cmp_per_index_enabled
                - innodb_commit_concurrency
                - innodb_deadlock_detect
                - innodb_default_row_format
                - innodb_file_per_table
                - innodb_flush_log_at_trx_commit
                - innodb_ft_max_token_size
                - innodb_ft_min_token_size
                - innodb_ft_num_word_optimize
                - innodb_ft_sort_pll_degree
                - innodb_online_alter_log_max_size
                - innodb_optimize_fulltext_only
                - innodb_print_all_deadlocks
                - innodb_purge_batch_size
                - innodb_purge_threads
                - innodb_rollback_on_timeout
                - innodb_rollback_segments
                - innodb_spin_wait_delay
                - innodb_stats_include_delete_marked
                - innodb_strict_mode
                - innodb_support_xa
                - innodb_sync_array_size
                - innodb_sync_spin_loops
                - innodb_table_locks
                - innodb_trx_commit_allow_data_loss
                - internal_tmp_disk_storage_engine
                - internal_tmp_mem_storage_engine
                - key_buffer_size
                - lc_time_names
                - log_error_suppression_list
                - low_priority_updates
                - lower_case_table_names
                - master_verify_checksum
                - master-info-repository
                - max_delayed_threads
                - max_error_count
                - max_execution_time
                - min_examined_row_limit
                - preload_buffer_size
                - query_cache_type
                - read_only
                - relay-log-space-limit
                - replica_parallel_type
                - replica_preserve_commit_order
                - replica_transaction_retries
                - replica_type_conversions
                - replicate-do-db
                - replicate-do-table
                - replicate-ignore-db
                - replicate-ignore-table
                - replicate-wild-do-table
                - replicate-wild-ignore-table
                - require_secure_transport
                - rpl_read_size
                - server_audit_events
                - server_audit_excl_users
                - server_audit_incl_users
                - server_audit_logging
                - server_audit_logs_upload
                - skip-character-set-client-handshake
                - slave-skip-errors
                - source_verify_checksum
                - sync_frm
                - thread_cache_size
                - time_zone
                - tls_version
              value:
                type: string
                title: Value
              apply_method:
                type: string
                title: Apply Method
                description: When to apply the parameter changes.
                default: pending-reboot
                enum:
                - pending-reboot
                - immediate
    availability:
      title: Availability
      type: object
      required:
      - min_replicas
      - autoscaling_mode
      properties:
        min_replicas:
          title: Minimum Replicas
          description: Replicas and primary are automatically spread across AWS zones.
          type: integer
          minimum: 0
          default: 0
          maximum: 15
        autoscaling_mode:
          title: Autoscaling Mode
          type: string
          default: DISABLED
          oneOf:
          - title: Disabled
            const: DISABLED
          - title: Database Connections
            const: RDSReaderAverageDatabaseConnections
          - title: CPU Utilization
            const: RDSReaderAverageCPUUtilization
      dependencies:
        autoscaling_mode:
          oneOf:
          - properties:
              autoscaling_mode:
                const: DISABLED
          - required:
            - max_replicas
            - scale_in_cooldown
            - scale_out_cooldown
            - target_value
            properties:
              autoscaling_mode:
                const: RDSReaderAverageDatabaseConnections
              max_replicas:
                title: Max Replicas
                description: Must be greater than `min_replicas`
                type: integer
                maximum: 15
                minimum: 1
              scale_in_cooldown:
                title: Scale-in Cooldown
                description: The number of **seconds** to block subsequent scale-in
                  requests.
                type: integer
                minimum: 0
                maximum: 3000
                default: 300
              scale_out_cooldown:
                title: Scale-out Cooldown
                description: The number of **seconds** to block subsequent scale-out
                  requests.
                type: integer
                minimum: 0
                maximum: 3000
                default: 300
              target_value:
                title: Target Database Connections
                description: The average number of database connections to target
                  across all readers.
                type: integer
                minimum: 0
                default: 400
          - required:
            - max_replicas
            - scale_in_cooldown
            - scale_out_cooldown
            - target_value
            properties:
              autoscaling_mode:
                const: RDSReaderAverageCPUUtilization
              max_replicas:
                title: Max Replicas
                description: Must be greater than `min_replicas`
                type: integer
                maximum: 15
                minimum: 1
              scale_in_cooldown:
                title: Scale-in Cooldown
                description: The number of **seconds** to block subsequent scale-in
                  requests.
                type: integer
                minimum: 0
                maximum: 3000
                default: 300
              scale_out_cooldown:
                title: Scale-out Cooldown
                description: The number of **seconds** to block subsequent scale-out
                  requests.
                type: integer
                minimum: 0
                maximum: 3000
                default: 300
              target_value:
                title: Target CPU Utilization
                description: The average CPU utilization to target across all readers.
                type: integer
                minimum: 5
                maximum: 100
                default: 80
    observability:
      title: Observability
      type: object
      required:
      - enhanced_monitoring_interval
      - performance_insights_retention_period
      properties:
        performance_insights_retention_period:
          title: Performance Insights Retention Period
          description: Performance Insights is a database performance tuning and monitoring
            feature that helps you quickly assess the load on your database, and determine
            when and where to take action. Performance Insights allows non-experts
            to detect performance problems with an easy-to-understand dashboard that
            visualizes database load.
          type: integer
          default: 0
          oneOf:
          - title: Disabled
            const: 0
          - title: 1 Week
            const: 7
          - title: 1 Month
            const: 31
          - title: 3 Months
            const: 93
          - title: 6 Months
            const: 186
          - title: 1 Year
            const: 372
          - title: 2 Years
            const: 731
        enabled_cloudwatch_logs_exports:
          title: Enabled Cloudwatch Logs Export
          description: Export logs to Cloudwatch for auditing and monitoring.
          type: array
          uniqueItems: true
          items:
            enum:
            - audit
            - error
            - general
            - slowquery
        enhanced_monitoring_interval:
          title: Enhanced Monitoring Interval
          description: Monitor the operating system of DB instances in real time.
            Enhanced Monitoring is stored in Cloudwatch Logs and may incur additional
            changes. [Learn more](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_Monitoring.OS.html)
          type: integer
          default: 0
          oneOf:
          - title: Disabled
            const: 0
          - title: 1 second
            const: 1
          - title: 5 seconds
            const: 5
          - title: 10 seconds
            const: 10
          - title: 15 seconds
            const: 15
          - title: 30 seconds
            const: 30
          - title: 60 seconds
            const: 60
    backup:
      title: Backups, Snapshots, & Recovery
      type: object
      required:
      - skip_final_snapshot
      - retention_period
      properties:
        skip_final_snapshot:
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/aws/rds/skip_final_snapshot.json
        retention_period:
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/aws/rds/backup_retention_period.json
    database:
      title: Database
      type: object
      required:
      - version
      - deletion_protection
      - instance_class
      - ca_cert_identifier
      properties:
        source_snapshot:
          "$md.immutable": true
          title: Restore from Snapshot (ARN)
          description: Cluster or database snapshot ARN. Specifies whether or not
            to **create** this cluster from a snapshot. Aurora clusters can be restored
            from cluster snapshots *or* database snapshots. [Learn more](https://docs.massdriver.cloud/runbook/aws/migrating-rds-databases)
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/artifact-definitions/main/definitions/types/aws-arn.json
          pattern: "^arn:aws:rds:[a-zA-Z0-9._-]*:[0-9]{12}:(cluster-snapshot|snapshot):[a-zA-Z0-9/._-]+$"
        ca_cert_identifier:
          title: SSL/TLS Encryption
          description: The identifier of the CA certificate for the DB instances.
            [Learn more](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html).
          type: string
          default: rds-ca-rsa2048-g1
          oneOf:
          - title: RSA 2048
            const: rds-ca-rsa2048-g1
          - title: RSA 4096
            const: rds-ca-rsa4096-g1
          - title: ECC 384
            const: rds-ca-ecc384-g1
        version:
          title: MySQL Version
          type: string
          default: 8.0.mysql_aurora.3.07.1
          oneOf:
          - title: Aurora (MySQL 5.7) 2.11.1
            const: 5.7.mysql_aurora.2.11.1
          - title: Aurora (MySQL 5.7) 2.11.2
            const: 5.7.mysql_aurora.2.11.2
          - title: Aurora (MySQL 5.7) 2.11.3
            const: 5.7.mysql_aurora.2.11.3
          - title: Aurora (MySQL 5.7) 2.11.4
            const: 5.7.mysql_aurora.2.11.4
          - title: Aurora MySQL (compatible with MySQL 5.7.2.11.4)
            const: 5.7.mysql_aurora.2.11.4
          - title: Aurora (MySQL 5.7) 2.11.5
            const: 5.7.mysql_aurora.2.11.5
          - title: Aurora (MySQL 5.7) 2.11.6
            const: 5.7.mysql_aurora.2.11.6
          - title: Aurora MySQL 2.12.0 (compatible with MySQL 5.7.40)
            const: 5.7.mysql_aurora.2.12.0
          - title: Aurora MySQL 2.12.1 (compatible with MySQL 5.7.40)
            const: 5.7.mysql_aurora.2.12.1
          - title: Aurora MySQL 2.12.2 (compatible with MySQL 5.7.44)
            const: 5.7.mysql_aurora.2.12.2
          - title: Aurora MySQL 2.12.3 (compatible with MySQL 5.7.44)
            const: 5.7.mysql_aurora.2.12.3
          - title: Aurora MySQL 2.12.4 (compatible with MySQL 5.7.44)
            const: 5.7.mysql_aurora.2.12.4
          - title: Aurora MySQL 3.04.0 (compatible with MySQL 8.0.28)
            const: 8.0.mysql_aurora.3.04.0
          - title: Aurora MySQL 3.04.1 (compatible with MySQL 8.0.28)
            const: 8.0.mysql_aurora.3.04.1
          - title: Aurora MySQL 3.04.2 (compatible with MySQL 8.0.28)
            const: 8.0.mysql_aurora.3.04.2
          - title: Aurora MySQL 3.04.3 (compatible with MySQL 8.0.28)
            const: 8.0.mysql_aurora.3.04.3
          - title: Aurora MySQL 3.05.2 (compatible with MySQL 8.0.32)
            const: 8.0.mysql_aurora.3.05.2
          - title: Aurora MySQL 3.06.0 (compatible with MySQL 8.0.34)
            const: 8.0.mysql_aurora.3.06.0
          - title: Aurora MySQL 3.06.1 (compatible with MySQL 8.0.34)
            const: 8.0.mysql_aurora.3.06.1
          - title: Aurora MySQL 3.07.0 (compatible with MySQL 8.0.36)
            const: 8.0.mysql_aurora.3.07.0
          - title: Aurora MySQL 3.07.1 (compatible with MySQL 8.0.36)
            const: 8.0.mysql_aurora.3.07.1
        deletion_protection:
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/aws/rds/deletion_protection.json
      dependencies:
        instance_class:
          oneOf:
          - properties:
              instance_class:
                enum:
                - db.serverless
              serverless_scaling:
                "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/aws/rds/aurora/serverlessv2_scaling_configuration.json
          - properties:
              instance_class:
                not:
                  enum:
                  - db.serverless
        version:
          oneOf:
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.2
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.3
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.4
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.4
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.5
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.11.6
              instance_class:
                "$ref": "#/$defs/instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.0
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.2
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.3
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 5.7.mysql_aurora.2.12.4
              instance_class:
                "$ref": "#/$defs/instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.04.0
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.04.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.04.2
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.04.3
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.05.2
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.06.0
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.06.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.07.0
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
          - properties:
              version:
                const: 8.0.mysql_aurora.3.07.1
              instance_class:
                "$ref": "#/$defs/instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9"
    networking:
      title: Networking
      type: object
      properties:
        subnet_type:
          "$ref": https://raw.githubusercontent.com/massdriver-cloud/json-schemas/main/massdriver/properties/networking/aws/subnet_type.json
  "$defs":
    instance-class-group-cb0f862b48789774870d5fc209c941f7c1fc22c74318782625b0e07aa79d9afc:
      title: Instance Class
      type: string
      oneOf:
      - title: Burstable 2 GiB, 1 vCPUs (db.t2.small)
        const: db.t2.small
      - title: Burstable 2 GiB, 2 vCPUs (db.t3.small)
        const: db.t3.small
      - title: Burstable 4 GiB, 2 vCPUs (db.t3.medium)
        const: db.t3.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t2.medium)
        const: db.t2.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t4g.medium)
        const: db.t4g.medium
      - title: Burstable 8 GiB, 2 vCPUs (db.t4g.large)
        const: db.t4g.large
      - title: Burstable 8 GiB, 2 vCPUs (db.t3.large)
        const: db.t3.large
      - title: Memory Optimized 15 GiB, 2 vCPUs (db.r4.large)
        const: db.r4.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6i.large)
        const: db.r6i.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r5.large)
        const: db.r5.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6g.large)
        const: db.r6g.large
      - title: Memory Optimized 32 GiB, 2 vCPUs (db.x2g.large)
        const: db.x2g.large
      - title: Memory Optimized 30 GiB, 4 vCPUs (db.r4.xlarge)
        const: db.r4.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6g.xlarge)
        const: db.r6g.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r5.xlarge)
        const: db.r5.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6i.xlarge)
        const: db.r6i.xlarge
      - title: Memory Optimized 64 GiB, 4 vCPUs (db.x2g.xlarge)
        const: db.x2g.xlarge
      - title: Memory Optimized 61 GiB, 8 vCPUs (db.r4.2xlarge)
        const: db.r4.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6g.2xlarge)
        const: db.r6g.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6i.2xlarge)
        const: db.r6i.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r5.2xlarge)
        const: db.r5.2xlarge
      - title: Memory Optimized 128 GiB, 8 vCPUs (db.x2g.2xlarge)
        const: db.x2g.2xlarge
      - title: Memory Optimized 122 GiB, 16 vCPUs (db.r4.4xlarge)
        const: db.r4.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r5.4xlarge)
        const: db.r5.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6g.4xlarge)
        const: db.r6g.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6i.4xlarge)
        const: db.r6i.4xlarge
      - title: Memory Optimized 256 GiB, 16 vCPUs (db.x2g.4xlarge)
        const: db.x2g.4xlarge
      - title: Memory Optimized 244 GiB, 32 vCPUs (db.r4.8xlarge)
        const: db.r4.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6g.8xlarge)
        const: db.r6g.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6i.8xlarge)
        const: db.r6i.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r5.8xlarge)
        const: db.r5.8xlarge
      - title: Memory Optimized 512 GiB, 32 vCPUs (db.x2g.8xlarge)
        const: db.x2g.8xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6g.12xlarge)
        const: db.r6g.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r5.12xlarge)
        const: db.r5.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6i.12xlarge)
        const: db.r6i.12xlarge
      - title: Memory Optimized 768 GiB, 48 vCPUs (db.x2g.12xlarge)
        const: db.x2g.12xlarge
      - title: Memory Optimized 488 GiB, 64 vCPUs (db.r4.16xlarge)
        const: db.r4.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r5.16xlarge)
        const: db.r5.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6g.16xlarge)
        const: db.r6g.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6i.16xlarge)
        const: db.r6i.16xlarge
      - title: Memory Optimized 1024 GiB, 64 vCPUs (db.x2g.16xlarge)
        const: db.x2g.16xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r5.24xlarge)
        const: db.r5.24xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r6i.24xlarge)
        const: db.r6i.24xlarge
      - title: Memory Optimized 1024 GiB, 128 vCPUs (db.r6i.32xlarge)
        const: db.r6i.32xlarge
    instance-class-group-dd8fd9cff86d5ef98d3933b807763637c74769f4d17951a7489b012ac7626a86:
      title: Instance Class
      type: string
      oneOf:
      - title: Burstable 2 GiB, 1 vCPUs (db.t2.small)
        const: db.t2.small
      - title: Burstable 2 GiB, 2 vCPUs (db.t3.small)
        const: db.t3.small
      - title: Burstable 4 GiB, 2 vCPUs (db.t4g.medium)
        const: db.t4g.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t3.medium)
        const: db.t3.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t2.medium)
        const: db.t2.medium
      - title: Burstable 8 GiB, 2 vCPUs (db.t3.large)
        const: db.t3.large
      - title: Burstable 8 GiB, 2 vCPUs (db.t4g.large)
        const: db.t4g.large
      - title: Memory Optimized 15 GiB, 2 vCPUs (db.r4.large)
        const: db.r4.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r7g.large)
        const: db.r7g.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6i.large)
        const: db.r6i.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6g.large)
        const: db.r6g.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r5.large)
        const: db.r5.large
      - title: Memory Optimized 32 GiB, 2 vCPUs (db.x2g.large)
        const: db.x2g.large
      - title: Memory Optimized 30 GiB, 4 vCPUs (db.r4.xlarge)
        const: db.r4.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r7g.xlarge)
        const: db.r7g.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r5.xlarge)
        const: db.r5.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6g.xlarge)
        const: db.r6g.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6i.xlarge)
        const: db.r6i.xlarge
      - title: Memory Optimized 64 GiB, 4 vCPUs (db.x2g.xlarge)
        const: db.x2g.xlarge
      - title: Memory Optimized 61 GiB, 8 vCPUs (db.r4.2xlarge)
        const: db.r4.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r7g.2xlarge)
        const: db.r7g.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6g.2xlarge)
        const: db.r6g.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6i.2xlarge)
        const: db.r6i.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r5.2xlarge)
        const: db.r5.2xlarge
      - title: Memory Optimized 128 GiB, 8 vCPUs (db.x2g.2xlarge)
        const: db.x2g.2xlarge
      - title: Memory Optimized 122 GiB, 16 vCPUs (db.r4.4xlarge)
        const: db.r4.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6g.4xlarge)
        const: db.r6g.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r7g.4xlarge)
        const: db.r7g.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r5.4xlarge)
        const: db.r5.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6i.4xlarge)
        const: db.r6i.4xlarge
      - title: Memory Optimized 256 GiB, 16 vCPUs (db.x2g.4xlarge)
        const: db.x2g.4xlarge
      - title: Memory Optimized 244 GiB, 32 vCPUs (db.r4.8xlarge)
        const: db.r4.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6i.8xlarge)
        const: db.r6i.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r5.8xlarge)
        const: db.r5.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6g.8xlarge)
        const: db.r6g.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r7g.8xlarge)
        const: db.r7g.8xlarge
      - title: Memory Optimized 512 GiB, 32 vCPUs (db.x2g.8xlarge)
        const: db.x2g.8xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r5.12xlarge)
        const: db.r5.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6g.12xlarge)
        const: db.r6g.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6i.12xlarge)
        const: db.r6i.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r7g.12xlarge)
        const: db.r7g.12xlarge
      - title: Memory Optimized 768 GiB, 48 vCPUs (db.x2g.12xlarge)
        const: db.x2g.12xlarge
      - title: Memory Optimized 488 GiB, 64 vCPUs (db.r4.16xlarge)
        const: db.r4.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6i.16xlarge)
        const: db.r6i.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r7g.16xlarge)
        const: db.r7g.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6g.16xlarge)
        const: db.r6g.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r5.16xlarge)
        const: db.r5.16xlarge
      - title: Memory Optimized 1024 GiB, 64 vCPUs (db.x2g.16xlarge)
        const: db.x2g.16xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r6i.24xlarge)
        const: db.r6i.24xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r5.24xlarge)
        const: db.r5.24xlarge
      - title: Memory Optimized 1024 GiB, 128 vCPUs (db.r6i.32xlarge)
        const: db.r6i.32xlarge
    instance-class-group-e614c4f593221b5237a4968818278ab54df12d2c084ef786849c96f46a9735b9:
      title: Instance Class
      type: string
      oneOf:
      - title: Serverless 2GiB / 1 ACU (db.serverless)
        const: db.serverless
      - title: Burstable 4 GiB, 2 vCPUs (db.t4g.medium)
        const: db.t4g.medium
      - title: Burstable 4 GiB, 2 vCPUs (db.t3.medium)
        const: db.t3.medium
      - title: Burstable 8 GiB, 2 vCPUs (db.t4g.large)
        const: db.t4g.large
      - title: Burstable 8 GiB, 2 vCPUs (db.t3.large)
        const: db.t3.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6g.large)
        const: db.r6g.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r6i.large)
        const: db.r6i.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r5.large)
        const: db.r5.large
      - title: Memory Optimized 16 GiB, 2 vCPUs (db.r7g.large)
        const: db.r7g.large
      - title: Memory Optimized 32 GiB, 2 vCPUs (db.x2g.large)
        const: db.x2g.large
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r5.xlarge)
        const: db.r5.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r7g.xlarge)
        const: db.r7g.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6i.xlarge)
        const: db.r6i.xlarge
      - title: Memory Optimized 32 GiB, 4 vCPUs (db.r6g.xlarge)
        const: db.r6g.xlarge
      - title: Memory Optimized 64 GiB, 4 vCPUs (db.x2g.xlarge)
        const: db.x2g.xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6g.2xlarge)
        const: db.r6g.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r6i.2xlarge)
        const: db.r6i.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r5.2xlarge)
        const: db.r5.2xlarge
      - title: Memory Optimized 64 GiB, 8 vCPUs (db.r7g.2xlarge)
        const: db.r7g.2xlarge
      - title: Memory Optimized 128 GiB, 8 vCPUs (db.x2g.2xlarge)
        const: db.x2g.2xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6i.4xlarge)
        const: db.r6i.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r7g.4xlarge)
        const: db.r7g.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r5.4xlarge)
        const: db.r5.4xlarge
      - title: Memory Optimized 128 GiB, 16 vCPUs (db.r6g.4xlarge)
        const: db.r6g.4xlarge
      - title: Memory Optimized 256 GiB, 16 vCPUs (db.x2g.4xlarge)
        const: db.x2g.4xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6i.8xlarge)
        const: db.r6i.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r5.8xlarge)
        const: db.r5.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r6g.8xlarge)
        const: db.r6g.8xlarge
      - title: Memory Optimized 256 GiB, 32 vCPUs (db.r7g.8xlarge)
        const: db.r7g.8xlarge
      - title: Memory Optimized 512 GiB, 32 vCPUs (db.x2g.8xlarge)
        const: db.x2g.8xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6i.12xlarge)
        const: db.r6i.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r5.12xlarge)
        const: db.r5.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r6g.12xlarge)
        const: db.r6g.12xlarge
      - title: Memory Optimized 384 GiB, 48 vCPUs (db.r7g.12xlarge)
        const: db.r7g.12xlarge
      - title: Memory Optimized 768 GiB, 48 vCPUs (db.x2g.12xlarge)
        const: db.x2g.12xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r5.16xlarge)
        const: db.r5.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6i.16xlarge)
        const: db.r6i.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r6g.16xlarge)
        const: db.r6g.16xlarge
      - title: Memory Optimized 512 GiB, 64 vCPUs (db.r7g.16xlarge)
        const: db.r7g.16xlarge
      - title: Memory Optimized 1024 GiB, 64 vCPUs (db.x2g.16xlarge)
        const: db.x2g.16xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r6i.24xlarge)
        const: db.r6i.24xlarge
      - title: Memory Optimized 768 GiB, 96 vCPUs (db.r5.24xlarge)
        const: db.r5.24xlarge
      - title: Memory Optimized 1024 GiB, 128 vCPUs (db.r6i.32xlarge)
        const: db.r6i.32xlarge
connections:
  required:
  - vpc
  - aws_authentication
  properties:
    vpc:
      "$ref": massdriver/aws-vpc
    aws_authentication:
      "$ref": massdriver/aws-iam-role
artifacts:
  required:
  - writer
  - readers
  properties:
    writer:
      "$ref": massdriver/mysql-authentication
    readers:
      "$ref": massdriver/mysql-authentication
ui:
  ui:order:
  - database
  - availability
  - observability
  - backups
  - "*"
  - networking
  parameter_groups:
    ui:order:
    - cluster_parameters
    - instance_parameters
    instance_parameters:
      items:
        ui:order:
        - name
        - value
        - apply_method
    cluster_parameters:
      items:
        ui:order:
        - name
        - value
        - apply_method
  database:
    ui:order:
    - version
    - instance_class
    - serverless_scaling
    - source_snapshot
    - ca_cert_identifier
    - deletion_protection
    serverless_scaling:
      ui:order:
      - min_capacity
      - max_capacity
  availability:
    ui:order:
    - autoscaling_mode
    - min_replicas
    - max_replicas
    - target_value
    - scale_in_cooldown
    - scale_out_cooldown
  backups:
    ui:order:
    - retention_period
    - skip_final_snapshot
    - "*"
  observability:
    ui:order:
    - enabled_cloudwatch_logs_exports
    - enhanced_monitoring_interval
    - performance_insights_retention_period
    - "*"
